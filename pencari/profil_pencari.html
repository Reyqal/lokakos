<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lokakos - Profil Pencari</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.29.2/feather.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        .sidebar {
            transition: all 0.3s;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <div class="sidebar bg-blue-800 text-white w-64 space-y-6 py-7 px-2 absolute inset-y-0 left-0 transform -translate-x-full md:relative md:translate-x-0 transition duration-200 ease-in-out" id="sidebar">
            <div class="flex items-center space-x-2 px-4">
                <i data-feather="home" class="w-8 h-8"></i>
                <span class="text-2xl font-extrabold">LOKAKOS</span>
            </div>
            <nav>
                <a href="dashboard_pencari.html" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-blue-700">
                    <i data-feather="search" class="w-5 h-5 mr-2"></i> Cari Kos
                </a>
                <a href="booking_pencari.html" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-blue-700">
                    <i data-feather="calendar" class="w-5 h-5 mr-2"></i> Booking Saya
                </a>
                <a href="pembayaran_pencari.html" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-blue-700">
                    <i data-feather="dollar-sign" class="w-5 h-5 mr-2"></i> Pembayaran
                </a>
                <a href="profil_pencari.html" class="block py-2.5 px-4 rounded transition duration-200 bg-blue-700 text-white">
                    <i data-feather="user" class="w-5 h-5 mr-2"></i> Profil
                </a>
                <a href="../logout.php" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-blue-700">
                    <i data-feather="log-out" class="w-5 h-5 mr-2"></i> Keluar
                </a>
            </nav>
        </div>
        
        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Header -->
            <header class="bg-white shadow-sm z-10">
                <div class="flex items-center justify-between px-6 py-4">
                    <div class="flex items-center">
                        <button id="menuBtn" class="text-gray-500 focus:outline-none md:hidden">
                            <i data-feather="menu" class="w-6 h-6"></i>
                        </button>
                        <h1 class="text-xl font-semibold text-gray-800 ml-2">Profil Saya</h1>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="relative">
                            <i data-feather="bell" class="w-6 h-6 text-gray-500"></i>
                            <span class="absolute top-0 right-0 block h-2 w-2 rounded-full bg-red-500"></span>
                        </div>
                        <div class="relative">
                            <img src="../img/profil.png" alt="User" class="w-8 h-8 rounded-full">
                        </div>
                    </div>
                    </div>
                    </header>
                    
                            <!-- Content -->
                            <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-4">
                                <div class="max-w-4xl mx-auto">
                                    <div class="bg-white rounded-lg shadow p-6 mb-6">
                                        <div class="flex flex-col md:flex-row md:items-center md:space-x-6">
                                            <div class="flex-shrink-0 mb-4 md:mb-0">
                                                <img id="profileImage" src="../img/profil.png" alt="Profile" class="h-32 w-32 rounded-full object-cover border-4 border-blue-100">
                                                <button onclick="document.getElementById('profileImageInput').click()" class="mt-2 w-full text-sm text-blue-600 hover:text-blue-800">
                                                    Ubah Foto
                                                </button>
                                                <input type="file" id="profileImageInput" class="hidden" accept="image/*">
                                            </div>
                                            <div class="flex-1">
                                                <h2 class="text-xl font-semibold text-gray-800" id="profileName">Reyqal Syawalano Enka Widodo</h2>
                                                <p class="text-gray-600 mb-4" id="profileEmail">dewi.lestari@example.com</p>
                                                
                                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                                    <div>
                                                        <p class="text-sm text-gray-500">Nomor Telepon</p>
                                                        <p class="text-gray-800" id="profilePhone">081234567890</p>
                                                    </div>
                                                    <div>
                                                        <p class="text-sm text-gray-500">Bergabung Sejak</p>
                                                        <p class="text-gray-800">15 Januari 2022</p>
                                                    </div>
                                                </div>
                                                
                                                <button onclick="showEditProfileModal()" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                                    Edit Profil
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-white rounded-lg shadow p-6 mb-6">
                                        <h2 class="text-lg font-semibold text-gray-800 mb-4">Ubah Password</h2>
                                        <form id="changePasswordForm" class="space-y-4">
                                            <div>
                                                <label for="currentPassword" class="block text-sm font-medium text-gray-700">Password Saat Ini</label>
                                                <input type="password" id="currentPassword" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                            </div>
                                            
                                            <div>
                                                <label for="newPassword" class="block text-sm font-medium text-gray-700">Password Baru</label>
                                                <input type="password" id="newPassword" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                                <p class="mt-1 text-sm text-gray-500">Minimal 8 karakter</p>
                                            </div>
                                            
                                            <div>
                                                <label for="confirmPassword" class="block text-sm font-medium text-gray-700">Konfirmasi Password Baru</label>
                                                <input type="password" id="confirmPassword" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                            </div>
                                            
                                            <div class="flex justify-end pt-4">
                                                <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                                    Simpan Password
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </main>
                        </div>
                    </div>
                    
                    <!-- Modal Edit Profil -->
                    <div id="editProfileModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden">
                        <div class="relative top-20 mx-auto p-5 border w-11/12 md:w-1/2 shadow-lg rounded-md bg-white">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold">Edit Profil</h3>
                                <button onclick="hideEditProfileModal()" class="text-gray-500 hover:text-gray-700">
                                    <i data-feather="x" class="w-6 h-6"></i>
                                </button>
                            </div>
                            
                            <form id="editProfileForm" class="space-y-4">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label for="editNama" class="block text-sm font-medium text-gray-700">Nama Lengkap*</label>
                                        <input type="text" id="editNama" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                    </div>
                                    
                                    <div>
                                        <label for="editEmail" class="block text-sm font-medium text-gray-700">Email*</label>
                                        <input type="email" id="editEmail" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label for="editPhone" class="block text-sm font-medium text-gray-700">Nomor Telepon*</label>
                                        <input type="tel" id="editPhone" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                    </div>
                                    
                                    <div>
                                        <label for="editAlamat" class="block text-sm font-medium text-gray-700">Alamat</label>
                                        <input type="text" id="editAlamat" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                    </div>
                                </div>
                                
                                <div>
                                    <label for="editBio" class="block text-sm font-medium text-gray-700">Tentang Saya</label>
                                    <textarea id="editBio" rows="3" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"></textarea>
                                </div>
                                
                                <div class="flex justify-end space-x-3 pt-4">
                                    <button type="button" onclick="hideEditProfileModal()" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                        Batal
                                    </button>
                                    <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                        Simpan Perubahan
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <script>
                        feather.replace();
                        
                        // Toggle sidebar on mobile
                        const sidebar = document.getElementById('sidebar');
                        const menuBtn = document.getElementById('menuBtn');
                        
                        menuBtn.addEventListener('click', () => {
                            sidebar.classList.toggle('-translate-x-full');
                        });
                        
                        // Profile data
                        let profileData = {
                            nama: "Siti Syakirah",
                            email: "syakirah@gmail.com",
                            phone: "082312345678",
                            alamat: "Jl. Pendidikan, No 26",
                            bio: "Mahasiswa semester 2 di Universitas Tadulako. Mencari kos yang nyaman dan dekat dengan kampus.",
                            foto: "../img/profil.png"
                        };
                        
                        // Load profile data
                        function loadProfileData() {
                            document.getElementById('profileName').textContent = profileData.nama;
                            document.getElementById('profileEmail').textContent = profileData.email;
                            document.getElementById('profilePhone').textContent = profileData.phone;
                            document.getElementById('profileImage').src = profileData.foto;
                        }
                        
                        // Show edit profile modal
                        function showEditProfileModal() {
                            document.getElementById('editNama').value = profileData.nama;
                            document.getElementById('editEmail').value = profileData.email;
                            document.getElementById('editPhone').value = profileData.phone;
                            document.getElementById('editAlamat').value = profileData.alamat;
                            document.getElementById('editBio').value = profileData.bio;
                            
                            document.getElementById('editProfileModal').classList.remove('hidden');
                            feather.replace();
                        }
                        
                        function hideEditProfileModal() {
                            document.getElementById('editProfileModal').classList.add('hidden');
                        }
                        
                        // Update profile
                        document.getElementById('editProfileForm').addEventListener('submit', function(e) {
                            e.preventDefault();
                            
                            profileData = {
                                ...profileData,
                                nama: document.getElementById('editNama').value,
                                email: document.getElementById('editEmail').value,
                                phone: document.getElementById('editPhone').value,
                                alamat: document.getElementById('editAlamat').value,
                                bio: document.getElementById('editBio').value
                            };
                            
                            // Reload profile data
                            loadProfileData();
                            
                            // Hide modal
                            hideEditProfileModal();
                            
                            // Show success message
                            Swal.fire({
                                icon: 'success',
                                title: 'Berhasil!',
                                text: 'Profil telah diperbarui.',
                                confirmButtonColor: '#3b82f6',
                            });
                        });
                        
                        // Change password
                        document.getElementById('changePasswordForm').addEventListener('submit', function(e) {
                            e.preventDefault();
                            
                            const currentPassword = document.getElementById('currentPassword').value;
                            const newPassword = document.getElementById('newPassword').value;
                            const confirmPassword = document.getElementById('confirmPassword').value;
                            
                            if (newPassword !== confirmPassword) {
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Gagal!',
                                    text: 'Password baru dan konfirmasi password tidak cocok.',
                                    confirmButtonColor: '#3b82f6',
                                });
                                return;
                            }
                            
                            if (newPassword.length < 8) {
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Gagal!',
                                    text: 'Password baru harus minimal 8 karakter.',
                                    confirmButtonColor: '#3b82f6',
                                });
                                return;
                            }
                            
                            // In a real app, you would send this to the server
                            // For demo, we'll just show a success message
                            Swal.fire({
                                icon: 'success',
                                title: 'Berhasil!',
                                text: 'Password telah diubah.',
                                confirmButtonColor: '#3b82f6',
                            });
                            
                            // Reset form
                            document.getElementById('changePasswordForm').reset();
                        });
                        
                        // Change profile image
                        document.getElementById('profileImageInput').addEventListener('change', function(e) {
                            const file = e.target.files[0];
                            if (file) {
                                const reader = new FileReader();
                                reader.onload = function(event) {
                                    document.getElementById('profileImage').src = event.target.result;
                                    profileData.foto = event.target.result;
                                    
                                    Swal.fire({
                                        icon: 'success',
                                        title: 'Berhasil!',
                                        text: 'Foto profil telah diubah.',
                                        confirmButtonColor: '#3b82f6',
                                    });
                                };
                                reader.readAsDataURL(file);
                            }
                        });
                        
                        // Initialize
                        document.addEventListener('DOMContentLoaded', function() {
                            loadProfileData();
                        });
                    </script>
                    </body> 
                    </html>